<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>üå± GreenCircuit - Optimizaci√≥n de Rutas de Recolecci√≥n</title>

    <!-- Cytoscape.js -->
    <script src="https://unpkg.com/cytoscape/dist/cytoscape.min.js"></script>

    <!-- Estilos b√°sicos inline (sin archivo CSS separado por ahora) -->
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: Arial, sans-serif;
        padding: 20px;
        line-height: 1.6;
      }

      h1,
      h2,
      h3 {
        margin: 15px 0;
      }

      section {
        margin: 20px 0;
        padding: 15px;
        border: 1px solid #ddd;
      }

      button {
        padding: 10px 20px;
        margin: 5px;
        cursor: pointer;
        font-size: 14px;
      }

      input,
      select {
        padding: 8px;
        margin: 5px;
        font-size: 14px;
      }

      #graph-container {
        width: 100%;
        height: 500px;
        border: 2px solid #333;
        margin: 10px 0;
      }

      #log-container {
        width: 100%;
        height: 400px;
        border: 2px solid #333;
        overflow-y: auto;
        font-family: "Courier New", monospace;
        font-size: 12px;
        padding: 10px;
        background-color: #f5f5f5;
      }

      .log-entry {
        margin: 2px 0;
        padding: 2px 0;
      }

      .log-timestamp {
        color: #666;
        font-size: 10px;
      }

      .log-header {
        font-weight: bold;
        font-size: 14px;
        color: #2196f3;
      }

      .log-phase {
        font-weight: bold;
        color: #ff9800;
      }

      .log-info {
        color: #333;
      }

      .log-success {
        color: #4caf50;
        font-weight: bold;
      }

      .log-warning {
        color: #ff9800;
      }

      .log-error {
        color: #f44336;
        font-weight: bold;
      }

      .log-cycle {
        color: #9c27b0;
        font-family: monospace;
      }

      .log-result {
        color: #00796b;
      }

      .log-savings {
        color: #4caf50;
        font-weight: bold;
      }

      .log-separator {
        color: #999;
        margin: 10px 0;
      }

      .hidden {
        display: none;
      }

      .info-box {
        background-color: #e3f2fd;
        padding: 10px;
        margin: 10px 0;
        border-left: 4px solid #2196f3;
      }
    </style>
  </head>
  <body>
    <h1>üå± GreenCircuit</h1>
    <p>
      <strong>Optimizaci√≥n de Rutas de Recolecci√≥n de Residuos Urbanos</strong>
    </p>
    <p>
      Aplicaci√≥n del Problema del Agente Viajero (TSP) para minimizar
      distancias, tiempo y emisiones de CO‚ÇÇ.
    </p>

    <hr />

    <!-- SECCI√ìN 1: CONFIGURACI√ìN -->
    <section id="config-section">
      <h2>1Ô∏è‚É£ Configuraci√≥n del Grafo</h2>
      <div class="info-box">
        Ingresa el n√∫mero de puntos de recolecci√≥n (N) que deseas optimizar.
        <br />N debe estar entre 8 y 16 nodos.
      </div>

      <label for="input-n"><strong>N√∫mero de puntos (N):</strong></label>
      <input type="number" id="input-n" min="8" max="16" value="10" />

      <button id="btn-config">‚úÖ Configurar</button>

      <div id="config-status" style="margin-top: 10px"></div>
    </section>

    <!-- SECCI√ìN 2: GENERACI√ìN -->
    <section id="generation-section" class="hidden">
      <h2>2Ô∏è‚É£ Generaci√≥n del Grafo</h2>
      <div class="info-box">Elige c√≥mo generar los puntos de recolecci√≥n.</div>

      <button id="btn-random">üé≤ Generar Aleatoriamente</button>
      <button id="btn-random-circular">‚≠ï Generar en C√≠rculo</button>
      <button id="btn-random-grid">‚äû Generar en Grid</button>
      <button id="btn-manual">‚úèÔ∏è Entrada Manual</button>

      <div id="generation-status" style="margin-top: 10px"></div>
    </section>

    <!-- SECCI√ìN 3: VISUALIZACI√ìN DEL GRAFO -->
    <section id="visualization-section">
      <h2>3Ô∏è‚É£ Visualizaci√≥n del Grafo</h2>
      <div id="graph-info" class="info-box" style="display: none">
        <strong>Informaci√≥n del grafo:</strong>
        <div id="graph-stats"></div>
      </div>
      <div id="graph-container"></div>
      <div style="margin-top: 10px">
        <button id="btn-fit-view">üîç Ajustar Vista</button>
        <button id="btn-reset-view">üîÑ Resetear Vista</button>
      </div>
    </section>

    <!-- SECCI√ìN 4: CONTROLES DE EJECUCI√ìN -->
    <section id="controls-section" class="hidden">
      <h2>4Ô∏è‚É£ Controles de Ejecuci√≥n</h2>
      <div class="info-box">
        Selecciona la velocidad de ejecuci√≥n del algoritmo.
      </div>

      <div>
        <strong>Velocidad:</strong><br />
        <button id="btn-fast">‚ö° R√°pido (50ms/paso)</button>
        <button id="btn-slow">üê¢ Lento (1 seg/paso)</button>
        <button id="btn-manual-step">üëÜ Manual (click por click)</button>
      </div>

      <div id="manual-controls" class="hidden" style="margin-top: 10px">
        <button id="btn-next-step">‚û°Ô∏è Siguiente Paso</button>
      </div>

      <div style="margin-top: 15px">
        <button
          id="btn-execute"
          style="
            background-color: #4caf50;
            color: white;
            font-weight: bold;
            padding: 15px 30px;
          "
        >
          ‚ñ∂Ô∏è EJECUTAR ALGORITMO
        </button>
      </div>

      <div id="execution-status" style="margin-top: 10px"></div>
    </section>

    <!-- SECCI√ìN 5: LOGS Y RESULTADOS -->
    <section id="results-section">
      <h2>5Ô∏è‚É£ Proceso y Resultados</h2>
      <div style="margin-bottom: 10px">
        <button id="btn-clear-logs">üóëÔ∏è Limpiar Logs</button>
        <button id="btn-download-logs">üíæ Descargar Logs</button>
      </div>
      <div id="log-container"></div>
    </section>

    <!-- Footer -->
    <footer
      style="
        margin-top: 30px;
        padding-top: 20px;
        border-top: 1px solid #ddd;
        text-align: center;
        color: #666;
      "
    >
      <p>
        üå± <strong>GreenCircuit</strong> - Optimizaci√≥n de Rutas de Recolecci√≥n
        de Residuos
      </p>
      <p>Problema del Agente Viajero aplicado a sostenibilidad urbana</p>
    </footer>

    <!-- Scripts -->
    <script>
      // Script de diagn√≥stico (no-module)
      console.log("‚úÖ HTML cargado correctamente");
      console.log("üîç Verificando elementos del DOM...");

      window.addEventListener("DOMContentLoaded", () => {
        console.log("‚úÖ DOMContentLoaded disparado");
        console.log("üîç input-n:", document.getElementById("input-n"));
        console.log("üîç btn-config:", document.getElementById("btn-config"));
        console.log(
          "üîç generation-section:",
          document.getElementById("generation-section")
        );
        console.log(
          "üîç graph-container:",
          document.getElementById("graph-container")
        );
        console.log(
          "üîç log-container:",
          document.getElementById("log-container")
        );
      });
    </script>

    <script type="module" src="app.js"></script>

    <script>
      // Capturar errores de carga de m√≥dulos
      window.addEventListener("error", (e) => {
        console.error("‚ùå Error global capturado:", e);
        if (e.filename && e.filename.includes(".js")) {
          alert(
            "Error al cargar un m√≥dulo JavaScript. Aseg√∫rate de:\n1. Abrir el archivo desde un servidor local\n2. Usar Python: python -m http.server\n3. O usar Live Server en VS Code"
          );
        }
      });
    </script>
  </body>
</html>
