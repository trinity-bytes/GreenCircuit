<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GreenCircuit - OptimizaciÃ³n de Rutas de RecolecciÃ³n</title>

    <!-- CSS -->
    <link rel="stylesheet" href="src/styles/main.css" />

    <!-- Cytoscape.js desde CDN -->
    <script src="https://unpkg.com/cytoscape/dist/cytoscape.min.js"></script>
  </head>

  <body>
    <h1>ğŸŒ± GreenCircuit</h1>
    <p>
      <strong>OptimizaciÃ³n de Rutas de RecolecciÃ³n de Residuos Urbanos</strong>
    </p>
    <p>
      AplicaciÃ³n del Problema del Agente Viajero (TSP) para minimizar
      distancias, tiempo y emisiones de COâ‚‚.
    </p>

    <!-- SECCIÃ“N 1: CONFIGURACIÃ“N -->
    <section id="config-section">
      <h2>1ï¸âƒ£ ConfiguraciÃ³n del Grafo</h2>
      <div class="info-box">
        Ingresa el nÃºmero de puntos de recolecciÃ³n (N) que deseas optimizar.
        <br />N debe estar entre 8 y 16 nodos.
      </div>

      <label for="input-n"><strong>NÃºmero de puntos (N):</strong></label>
      <input type="number" id="input-n" min="8" max="16" value="10" />

      <button id="btn-config">âœ… Configurar</button>

      <div id="config-status"></div>
    </section>

    <!-- SECCIÃ“N 2: GENERACIÃ“N -->
    <section id="generation-section" class="hidden">
      <h2>2ï¸âƒ£ GeneraciÃ³n del Grafo</h2>
      <div class="info-box">Elige cÃ³mo generar los puntos de recolecciÃ³n.</div>

      <button id="btn-random">ğŸ² Generar Aleatoriamente</button>
      <button id="btn-random-circular">â­• Generar en CÃ­rculo</button>
      <button id="btn-random-grid">âŠ Generar en Grid</button>

      <div id="generation-status"></div>
    </section>

    <!-- SECCIÃ“N 3: VISUALIZACIÃ“N DEL GRAFO -->
    <section id="visualization-section">
      <h2>3ï¸âƒ£ VisualizaciÃ³n del Grafo</h2>
      <div id="graph-info" class="info-box hidden">
        <strong>InformaciÃ³n del grafo:</strong>
        <div id="graph-stats"></div>
      </div>
      <div id="graph-container"></div>
      <div class="button-group">
        <button id="btn-fit-view">ğŸ” Ajustar Vista</button>
        <button id="btn-reset-view">ğŸ”„ Resetear Vista</button>
        <button id="btn-toggle-edit">âœï¸ Modo EdiciÃ³n</button>
      </div>
      <div
        id="edit-mode-info"
        class="info-box hidden"
        style="background-color: #fff3e0; border-left-color: #ff9800"
      >
        <strong>âœï¸ Modo EdiciÃ³n Activo:</strong>
        <ul style="margin: 10px 0 0 20px">
          <li>
            <strong>Click en el canvas</strong> para agregar un nodo nuevo
          </li>
          <li><strong>Click derecho en un nodo</strong> para eliminarlo</li>
          <li><strong>MÃ¡ximo 16 nodos</strong> permitidos</li>
        </ul>
      </div>
    </section>

    <!-- SECCIÃ“N 4: CONTROLES DE EJECUCIÃ“N -->
    <section id="controls-section" class="hidden">
      <h2>4ï¸âƒ£ Controles de EjecuciÃ³n</h2>
      <div class="info-box">
        Selecciona la velocidad de ejecuciÃ³n del algoritmo.<br />
        <strong>âš ï¸ Nota:</strong> Para N > 10, se recomienda usar modo Lento o
        Manual para evitar que el navegador se congele.
      </div>

      <div>
        <strong>Velocidad:</strong><br />
        <button id="btn-fast">âš¡ RÃ¡pido (con pausas)</button>
        <button id="btn-slow">ğŸ¢ Lento (1 seg/paso)</button>
        <button id="btn-manual-step">ğŸ‘† Manual (click por click)</button>
      </div>

      <div id="manual-controls" class="hidden">
        <button id="btn-next-step">â¡ï¸ Siguiente Paso</button>
      </div>

      <div class="execute-container">
        <button id="btn-execute">â–¶ï¸ EJECUTAR ALGORITMO</button>
      </div>

      <div id="execution-status"></div>
      <div id="progress-container" class="hidden">
        <div class="progress-bar">
          <div class="progress-fill" id="progress-fill" style="width: 0%"></div>
        </div>
        <div id="progress-text">Progreso: 0%</div>
      </div>
    </section>

    <!-- SECCIÃ“N 5: LOGS Y RESULTADOS -->
    <section id="results-section">
      <h2>5ï¸âƒ£ Proceso y Resultados</h2>
      <div class="button-group">
        <button id="btn-clear-logs">ğŸ—‘ï¸ Limpiar Logs</button>
      </div>
      <div id="log-container"></div>
    </section>

    <footer>
      <p>
        ğŸŒ± <strong>GreenCircuit</strong> - OptimizaciÃ³n de Rutas de RecolecciÃ³n
        de Residuos
      </p>
      <p>Problema del Agente Viajero aplicado a sostenibilidad urbana</p>
    </footer>

    <!-- JavaScript - Orden de carga importante (clases primero, luego app.js) -->
    <script src="src/js/Graph.js"></script>
    <script src="src/js/RandomGenerator.js"></script>
    <script src="src/js/HamiltonianFinder.js"></script>
    <script src="src/js/TSPSolver.js"></script>
    <script src="src/js/CytoscapeRenderer.js"></script>
    <script src="src/js/LogDisplay.js"></script>
    <script src="src/js/GraphEditor.js"></script>
    <script src="src/js/app.js"></script>
  </body>
</html>
