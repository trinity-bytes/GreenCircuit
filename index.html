<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GreenCircuit - Optimización de Rutas de Recolección</title>

    <!-- CSS -->
    <link rel="stylesheet" href="src/styles/main.css" />

    <!-- Cytoscape.js desde CDN -->
    <script src="https://unpkg.com/cytoscape/dist/cytoscape.min.js"></script>
  </head>

  <body>
    <h1>🌱 GreenCircuit</h1>
    <p>
      <strong>Optimización de Rutas de Recolección de Residuos Urbanos</strong>
    </p>
    <p>
      Aplicación del Problema del Agente Viajero (TSP) para minimizar
      distancias, tiempo y emisiones de CO₂.
    </p>

    <!-- SECCIÓN 1: CONFIGURACIÓN -->
    <section id="config-section">
      <h2>1️⃣ Configuración del Grafo</h2>
      <div class="info-box">
        Ingresa el número de puntos de recolección (N) que deseas optimizar.
        <br />N debe estar entre 8 y 16 nodos.
      </div>

      <label for="input-n"><strong>Número de puntos (N):</strong></label>
      <input type="number" id="input-n" min="8" max="16" value="10" />

      <button id="btn-config">✅ Configurar</button>

      <div id="config-status"></div>
    </section>

    <!-- SECCIÓN 2: GENERACIÓN -->
    <section id="generation-section" class="hidden">
      <h2>2️⃣ Generación del Grafo</h2>
      <div class="info-box">Elige cómo generar los puntos de recolección.</div>

      <button id="btn-random">🎲 Generar Aleatoriamente</button>
      <button id="btn-random-circular">⭕ Generar en Círculo</button>
      <button id="btn-random-grid">⊞ Generar en Grid</button>

      <div id="generation-status"></div>
    </section>

    <!-- SECCIÓN 3: VISUALIZACIÓN DEL GRAFO -->
    <section id="visualization-section">
      <h2>3️⃣ Visualización del Grafo</h2>
      <div id="graph-info" class="info-box hidden">
        <strong>Información del grafo:</strong>
        <div id="graph-stats"></div>
      </div>
      <div id="graph-container"></div>
      <div class="button-group">
        <button id="btn-fit-view">🔍 Ajustar Vista</button>
        <button id="btn-reset-view">🔄 Resetear Vista</button>
        <button id="btn-toggle-edit">✏️ Modo Edición</button>
      </div>
      <div
        id="edit-mode-info"
        class="info-box hidden"
        style="background-color: #fff3e0; border-left-color: #ff9800"
      >
        <strong>✏️ Modo Edición Activo:</strong>
        <ul style="margin: 10px 0 0 20px">
          <li>
            <strong>Click en el canvas</strong> para agregar un nodo nuevo
          </li>
          <li><strong>Click derecho en un nodo</strong> para eliminarlo</li>
          <li><strong>Máximo 16 nodos</strong> permitidos</li>
        </ul>
      </div>
    </section>

    <!-- SECCIÓN 4: CONTROLES DE EJECUCIÓN -->
    <section id="controls-section" class="hidden">
      <h2>4️⃣ Controles de Ejecución</h2>
      <div class="info-box">
        Selecciona la velocidad de ejecución del algoritmo.<br />
        <strong>⚠️ Nota:</strong> Para N > 10, se recomienda usar modo Lento o
        Manual para evitar que el navegador se congele.
      </div>

      <div>
        <strong>Velocidad:</strong><br />
        <button id="btn-fast">⚡ Rápido (con pausas)</button>
        <button id="btn-slow">🐢 Lento (1 seg/paso)</button>
        <button id="btn-manual-step">👆 Manual (click por click)</button>
      </div>

      <div id="manual-controls" class="hidden">
        <button id="btn-next-step">➡️ Siguiente Paso</button>
      </div>

      <div class="execute-container">
        <button id="btn-execute">▶️ EJECUTAR ALGORITMO</button>
      </div>

      <div id="execution-status"></div>
      <div id="progress-container" class="hidden">
        <div class="progress-bar">
          <div class="progress-fill" id="progress-fill" style="width: 0%"></div>
        </div>
        <div id="progress-text">Progreso: 0%</div>
      </div>
    </section>

    <!-- SECCIÓN 5: LOGS Y RESULTADOS -->
    <section id="results-section">
      <h2>5️⃣ Proceso y Resultados</h2>
      <div class="button-group">
        <button id="btn-clear-logs">🗑️ Limpiar Logs</button>
      </div>
      <div id="log-container"></div>
    </section>

    <footer>
      <p>
        🌱 <strong>GreenCircuit</strong> - Optimización de Rutas de Recolección
        de Residuos
      </p>
      <p>Problema del Agente Viajero aplicado a sostenibilidad urbana</p>
    </footer>

    <!-- JavaScript - Orden de carga importante (clases primero, luego app.js) -->
    <script src="src/js/Graph.js"></script>
    <script src="src/js/RandomGenerator.js"></script>
    <script src="src/js/HamiltonianFinder.js"></script>
    <script src="src/js/TSPSolver.js"></script>
    <script src="src/js/CytoscapeRenderer.js"></script>
    <script src="src/js/LogDisplay.js"></script>
    <script src="src/js/GraphEditor.js"></script>
    <script src="src/js/app.js"></script>
  </body>
</html>
